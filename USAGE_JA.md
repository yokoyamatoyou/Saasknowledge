# 操作説明

このドキュメントでは、"Saasknowledge" アプリケーションの基本的な使い方と主要な機能を説明します。

## アプリの起動

1. 必要なパッケージをインストールします。
   ```bash
   scripts/install_light.sh
   scripts/install_extra.sh  # 必要に応じて heavy パッケージを追加
   ```
2. OpenAI API キーを設定した `.env` を用意します。
   ```bash
   export OPENAI_API_KEY=your_api_key
   ```
3. 以下のコマンドでアプリを起動します。
   ```bash
   ./run_app.sh          # Linux/macOS
   run_app.bat           # Windows
   ```
   ブラウザが開いたらアプリにアクセスできます。サイドバーは画面左上の「＜＜」/「＞＞」ボタンで折りたためます。

## 基本操作

アプリには **検索**、**管理**、**チャット** の3つのモードがあります。画面左のサイドバーでモードを切り替えて利用します。

### 検索モード

- アップロード済みのドキュメントを対象にキーワード検索できます。
- 検索欄にクエリを入力して **検索実行** ボタンを押すと結果が表示されます。
- **クリア** ボタンで入力と結果をリセットできます。

### 管理モード

- ドキュメントや画像などをドラッグ＆ドロップでアップロードし、ナレッジベースを構築します。
- 個別処理とまとめて処理を選択でき、まとめて処理では完了後にインデックスが自動で更新されます。
- アップロード一覧からタイトルやタグの編集、削除が行えます。

### チャットモード

- ナレッジベースの内容を参照しながら AI と対話できます。
- サイドバーでペルソナや温度などの設定を調整できます。
- 過去の会話は履歴として保存され、いつでも読み込み直せます。

## 便利な機能

- **FAQ生成**: `generate_faq.py` を実行すると既存ナレッジから FAQ を作成できます。
- **ハイブリッド検索**: ベクトル検索とキーワード検索（BM25）を組み合わせ、精度の高い検索結果を提供します。
- **検索エンジンの自動選択**: `shared/experiment_manager.py` により、利用状況から最適な検索アルゴリズムが自動的に選択されます。
- **メトリクス表示**: `show_metrics.py` を実行すると検索レスポンスなどの統計情報を確認できます。

詳細な環境変数やテスト方法については `README.md` と `README_JA.md` を参照してください。
